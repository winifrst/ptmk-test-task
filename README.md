# Employee App

Приложение для работы со справочником сотрудников.  
Реализовано на **C++** с использованием **SQLite3** для хранения данных

---

Программа поддерживает шесть режимов работы:

| Флаг | Описание |
|------|-----------|
| 1 | Создание таблицы **employees** |
| 2 | Добавление нового сотрудника вручную в формате `"Ivanov Petr Sergeevich" 2009-07-12 Male` |
| 3 | Вывод всех сотрудников в отсортированном виде |
| 4 | Автоматическая генерация и вставка 1,000,000 записей + 100 сотрудников с фамилией на **F** |
| 5 | Запрос по критерию: пол мужской, фамилия начинается с **F** - с замером времени |
| 6 | Оптимизация БД (создание индекса), повторный запрос и сравнение времени |

Вызов любого флага создаёт базу данных, если её не существует.

---

## Зависимости

Проект требует следующих зависимостей:

Зависимости
- **SQLite3** - Встроенная база данных
- **G++** - Компилятор с поддержкой C++20
- **Make** - Система сборки

Дополнительно для тестирования и проверки
- **GoogleTest** - Фреймворк для тестирования
- **Valgrind** - Санитайзер

---

## Сборка проекта
| Команда Makefile | Описание |
|-|-|
| make | Сборка основного приложения |
| make test | Сборка и запуск тестов |
| make clean | Очистка скомпилированных файлов |
| make valgrind | Проверка утечек памяти в тестах |

### Примеры запуска
| Команда | Описание |
|-|-|
| `./build/employee_app 1` | Создать таблицу employees | 
| `./build/employee_app 2 "Ivanov Ivan Ivanovich" 1990-01-01 Male` | Добавить сотрудника вручную | 
| `./build/employee_app 3` | Вывести всех сотрудников | 
| `./build/employee_app 4` | Сгенерировать 1,000,000 записей + 100 с фамилией F... | 
| `./build/employee_app 5` | Выполнить запрос по критерию Male + F% и замерить время | 
| `./build/employee_app 6` | Создать индекс и повторно измерить время (оптимизированный запрос) | 


### Оптимизация (Флаг 6)

Для ускорения выполнения выборки (mode 5) создаётся индекс на основании пола и фамилии. Ускорение выборки примерно на 10–20% за счёт того, что SQLite не сканирует всю таблицу.


### Структура проекта
├── src/
│   ├── main.cpp              # Точка входа
│   ├── database.cpp/.h       # Работа с SQLite
│   ├── employee.cpp/.h       # Класс Employee
│   ├── utils.cpp/.h          # Генерация и парсинг данных
│   ├── namer.cpp/.h          # Класс для генерации имён
├── test/
│   ├── test_database.cpp     # Тесты для Database
│   ├── test_utils.cpp        # Тесты для генерации данных
├── Makefile
└── README.md
